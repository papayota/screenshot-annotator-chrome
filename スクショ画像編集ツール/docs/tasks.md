# タスク管理・進捗

## 実装フェーズ

### Phase 1: プロジェクト基盤構築
- [ ] プロジェクトディレクトリ構成の作成
- [ ] manifest.json の作成（Manifest V3）
- [ ] アイコンファイルの準備（16/48/128px）
- [ ] README.md の作成

### Phase 2: スクリーンショット取得機能
- [ ] service_worker.js の基本構造作成
- [ ] chrome.action.onClicked イベントハンドラ実装
- [ ] chrome.tabs.captureVisibleTab でスクショ取得
- [ ] エラーハンドリング（権限エラー、取得失敗など）

### Phase 3: データ保存・受け渡し機能
- [ ] 画像ID生成ロジック（UUIDまたはタイムスタンプベース）
- [ ] chrome.storage.local への画像データ保存
- [ ] editor.html を新しいタブで開く処理
- [ ] クエリパラメータ（imageId）の受け渡し
- [ ] editor.js での storage.local からの画像読み込み

### Phase 4: 編集画面の基本UI
- [ ] editor.html の基本構造作成
- [ ] editor.css のスタイリング
- [ ] ツール選択UI（ボタン群）
- [ ] 保存ボタンの配置
- [ ] Canvas要素の配置（背景・前面の2層）

### Phase 5: Canvas実装
- [ ] 背景Canvasにスクショ画像を描画
- [ ] Canvasサイズと表示サイズの整合性確保
- [ ] 座標変換ロジック（表示座標 ↔ Canvas座標）
- [ ] 前面Canvasの初期化

### Phase 6: 注釈ツール実装

#### 6.1 矩形ツール
- [ ] マウスダウン/ムーブ/アップイベントの実装
- [ ] ドラッグ中の矩形プレビュー表示
- [ ] 矩形の描画（赤色、固定線幅）
- [ ] 矩形データの保存（座標、サイズ）

#### 6.2 矢印ツール
- [ ] ドラッグで矢印を引く機能
- [ ] アローヘッド（矢印の先端）の描画
- [ ] 矢印データの保存（開始点、終了点）

#### 6.3 番号アイコンツール
- [ ] クリック位置に番号を配置
- [ ] 連番機能（1, 2, 3...と自動増加）
- [ ] 丸付き数字の描画（赤丸+白文字 or 白丸+赤文字）
- [ ] 番号データの保存（位置、番号）

#### 6.4 テキストツール
- [ ] クリック位置の取得
- [ ] prompt() でテキスト入力
- [ ] テキストの描画（固定フォントサイズ、色）
- [ ] テキストデータの保存（位置、テキスト内容）

### Phase 7: 保存機能
- [ ] 2つのCanvasを1枚に合成する処理
- [ ] PNG形式への変換
- [ ] ファイル名生成（annotated-YYYYMMDD-HHMMSS.png）
- [ ] chrome.downloads.download でダウンロード
- [ ] エラーハンドリング

### Phase 8: テスト・デバッグ
- [ ] 各注釈ツールの動作確認
- [ ] 座標変換の精度確認
- [ ] 保存画像の品質確認
- [ ] エッジケースのテスト（大きな画像、小さな画像など）
- [ ] ブラウザ互換性確認

### Phase 9: ドキュメント・最終調整
- [ ] README.md の完成（インストール方法、使い方）
- [ ] コードコメントの追加・整理
- [ ] 不要なコードの削除
- [ ] 最終動作確認

---

## 進捗状況

**現在のフェーズ**: Phase 1（プロジェクト基盤構築）

**完了タスク数**: 0 / 全タスク数

**最終更新日**: 2024年（実装開始時）

---

## 注意事項・メモ

### 技術的な注意点
- Canvasの座標変換は慎重に実装（CSS拡大縮小との整合性）
- storage.local の容量制限に注意（画像データは大きい可能性）
- エラーハンドリングを各フェーズで適切に実装

### 実装優先順位
1. 基盤構築 → スクショ取得 → データ受け渡し
2. 編集画面UI → Canvas実装
3. 注釈ツール（矩形 → 矢印 → 番号 → テキスト）
4. 保存機能 → テスト

